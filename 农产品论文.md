基于Springboot和Vue的农产品销售平台

摘 要

本文设计并实现了一套农产品销售电商平台，是一个连接农产品生产者与消费者的新兴渠道。本系统采用前后端分离架构，前端基于Vue.js与Element UI构建，后端使用Spring Boot框架提供RESTful API服务，数据存储采用MySQL数据库。 系统面向普通用户、商户、管理员等多种角色，功能架构分为多个模块：用户与账户管理模块实现身份认证与权限控制；产品与交易模块支持产品发布、个性化推荐、购物车及支付功能；订单与物流模块处理订单全生命周期管理；系统管理与分析模块提供数据分析及内容管理功能。

全面的系统测试表明，系统功能完善、性能稳定、安全可靠且用户体验良好，已具备实际运营条件。 本平台为消费者提供便捷购买渠道，为生产者提供高效销售平台，同时为管理者提供管理工具与数据分析能力，通过模块化设计保证了良好的可维护性与可扩展性。

关键词 农产品电商；Spring Boot；Vue.js；订单管理；支付系统；协同过滤推荐算法

**Agricultural product sales platform based on Springboot and Vue**

ABSTRACT

This article designs and implements an agricultural product sales e-commerce platform, which is an emerging channel connecting agricultural product producers and consumers. This system adopts a front-end and back-end separation architecture, with the front-end built on Vue.js and Element UI, and the back-end using the Spring Boot framework to provide RESTful API services. The data storage adopts MySQL database. The system is designed for various roles such as ordinary users, merchants, and administrators, and its functional architecture is divided into multiple modules: the user and account management module implements identity authentication and permission control; The product and transaction module supports product release, personalized recommendation, shopping cart, and payment functions; Order and logistics module handles the full lifecycle management of orders; The system management and analysis module provides data analysis and content management functions.

Comprehensive system testing has shown that the system has complete functions, stable performance, safety and reliability, and a good user experience, and has practical operating conditions. This platform provides consumers with convenient purchasing channels, efficient sales platforms for producers, and management tools and data analysis capabilities for managers. Through modular design, it ensures good maintainability and scalability.

**KEY WORDS** Agricultural product e-commerce; Spring Boot； Vue.js； Order management; Payment system; collaborative filtering Recommendation

目 录

[基于Springboot和Vue的农产品销售平台 1](#_Toc23339)

[摘 要 1](#_Toc15319)

[ABSTRACT 2](#_Toc20038)

[1 引言 6](#_Toc30865)

[1.1 研究背景与意义 6](#_Toc6170)

[1.2 国内外研究现状 7](#_Toc21680)

[1.3 研究目标与内容 8](#_Toc10766)

[2 相关技术介绍 9](#_Toc12927)

[2.1 前后端分离技术 9](#_Toc16829)

[2.1.1 前后端分离技术的概念 9](#_Toc5058)

[2.1.2 前后端分离技术的优势 9](#_Toc29216)

[2.1.3 在本系统中的应用 9](#_Toc7857)

[2.2 Spring Boot技术 10](#_Toc13103)

[2.2.1 Spring Boot技术的概述 10](#_Toc5011)

[2.2.2 Spring Boot在本系统中的应用 10](#_Toc4986)

[2.3 Vue.js技术 10](#_Toc125)

[2.3.1 Vue.js概述 10](#_Toc17280)

[2.3.2 Vue.js在本系统中的应用 11](#_Toc11201)

[2.4 数据库技术 11](#_Toc12499)

[2.4.1 MySQL数据库 11](#_Toc13066)

[2.4.2 数据库在本系统中的应用 11](#_Toc22349)

[3 系统需求分析 13](#_Toc3139)

[3.1 功能性需求分析 13](#_Toc24788)

[3.1.1 用户与权限管理模块 13](#_Toc16050)

[3.1.2 产品与分类管理模块 13](#_Toc12435)

[3.1.3 订单与物流管理模块 14](#_Toc7665)

[3.1.4 系统支持与分析模块 14](#_Toc7301)

[3.2 非功能性需求分析 15](#_Toc23979)

[3.2.1 性能需求 15](#_Toc28868)

[3.2.2 可用性需求 15](#_Toc19527)

[3.2.3 安全性需求 15](#_Toc29190)

[4 详细设计 17](#_Toc13287)

[4.1 系统总体架构设计 17](#_Toc283)

[4.1.1 总体架构概述 17](#_Toc7270)

[4.1.2 前端展示层 17](#_Toc20351)

[4.1.3 后端服务层 18](#_Toc15928)

[4.1.4 关键技术实现 18](#_Toc21805)

[4.2 后端详细设计 19](#_Toc13659)

[4.2.1 项目结构设计 19](#_Toc31321)

[4.2.2 业务逻辑层设计 19](#_Toc15544)

[4.2.3 数据访问层设计 20](#_Toc15298)

[4.2.4 控制器层设计 20](#_Toc15780)

[4.3 前端详细设计 21](#_Toc1711)

[4.3.1 Vue项目结构设计 21](#_Toc7272)

[4.3.2 组件设计与开发 22](#_Toc12770)

[4.3.3 路由设计 22](#_Toc12784)

[4.3.4 状态管理设计 23](#_Toc25343)

[4.4 数据库设计 23](#_Toc9239)

[4.5 数据库设计概述 23](#_Toc27699)

[4.6 数据库E-R图 24](#_Toc6439)

[4.6.1 用户与权限管理模块E-R图 24](#_Toc19494)

[4.6.2 产品与分类模块E-R图 24](#_Toc26758)

[4.6.3 订单与物流模块E-R图 24](#_Toc2690)

[4.6.4 系统支持与分析模块E-R图 25](#_Toc14762)

[4.7 数据库表设计 25](#_Toc15755)

[4.7.1 用户与权限管理模块 25](#_Toc19401)

[4.7.2 产品与分类模块 27](#_Toc10655)

[4.7.3 订单与物流模块 30](#_Toc13276)

[4.7.4 系统支持与分析模块 32](#_Toc12698)

[5 系统功能实现 34](#_Toc3056)

[5.1 用户模块实现 34](#_Toc18286)

[5.1.1 用户注册功能 34](#_Toc9697)

[5.1.2 用户登录功能 35](#_Toc18036)

[5.1.3 用户管理功能 35](#_Toc9447)

[5.1.4 个人信息管理功能 36](#_Toc11579)

[5.2 产品模块的实现 36](#_Toc15526)

[5.2.1 产品管理功能 36](#_Toc6884)

[5.2.2 前台产品展示功能 37](#_Toc2459)

[5.2.3 产品查询功能 37](#_Toc21582)

[5.2.4 产品推荐实现 38](#_Toc22049)

[5.3 订单模块详细设计 40](#_Toc30614)

[5.3.1 订单管理功能 40](#_Toc30814)

[5.3.2 用户订单功能 41](#_Toc30911)

[5.3.3 订单查询功能 41](#_Toc6362)

[5.3.4 订单状态管理功能 41](#_Toc6275)

[5.4 购物车模块详细设计 42](#_Toc28301)

[5.5 购物车管理功能 42](#_Toc20108)

[5.5.1 前台购物车功能 43](#_Toc9386)

[5.5.2 购物车查询功能 43](#_Toc10928)

[6 系统测试与优化 45](#_Toc32624)

[6.1 测试环境与策略 45](#_Toc3305)

[6.1.1 测试环境配置 45](#_Toc16578)

[6.2 测试策略与方法 45](#_Toc21016)

[6.3 功能测试 45](#_Toc4705)

[6.3.1 用户与账户管理模块 45](#_Toc17367)

[6.3.2 产品与交易模块 47](#_Toc10992)

[6.3.3 订单与物流模块 49](#_Toc19430)

[6.3.4 物流管理功能测试 50](#_Toc19505)

[6.4 测试结果分析 50](#_Toc12280)

[6.4.1 测试覆盖情况 51](#_Toc27678)

[6.4.2 主要发现问题 51](#_Toc232)

[6.4.3 改进措施与效果 51](#_Toc10183)

[6.4.4 总体评价 51](#_Toc162)

[7 总结 53](#_Toc22044)

[7.1 研究成果 53](#_Toc7233)

[7.1.1 系统架构创新 53](#_Toc522)

[7.1.2 功能模块完善 53](#_Toc17458)

[7.1.3 用户体验优化 53](#_Toc3743)

[7.2 创新点 53](#_Toc31326)

[7.2.1 基于协同过滤的产品推荐机制 53](#_Toc7426)

[7.2.2 动态菜单与权限管理 53](#_Toc19337)

[7.3 未来展望 53](#_Toc24121)

[参考文献 55](#_Toc11871)

# 引言

## 研究背景与意义

随着中国农业现代化的持续快速推进以及互联网技术的蓬勃兴起，传统农产品销售模式正经历着前所未有的巨大转型压力，同时也迎来了难得的发展机遇。长期以来，我国农产品流通体系一直存在着诸多突出问题，如流通环节繁多、整体效率低下、成本居高不下等，这些问题致使农民增收面临较大困难，消费者可选择的购买渠道十分有限，众多优质农产品也难以实现其应有的价值。特别是新冠疫情发生后，传统农产品销售渠道遭受到严重冲击，而线上销售方式却彰显出强大的韧性和巨大潜力<sup>\[1\]</sup>。在此大背景下，构建这一农产品销售平台，已然成为破解当前农产品流通难题、有力推动农业产业升级的关键路径。

农产品销售平台的研发与探索，蕴含着多方面极为重要的意义。从经济层面来讲，该系统能够有效缩短农产品从生产源头到消费者手中的流通环节，进而大幅降低中间产生的各项成本，实现农民收入的稳步提升，同时也能充分满足消费者对于优质农产品的迫切需求，有力地促进整个农业经济的持续向好发展。从社会层面而言，其对于乡村振兴战略的深入实施具有显著推动作用，可以加速农业现代化与信息化的深度融合进程，进一步优化农村地区的就业结构，全方位促进农村经济的繁荣与发展<sup>\[2\]</sup>。从技术层面剖析，农产品电商系统的开发涉及前后端分离技术、Spring Boot 框架、Vue.js 前端框架以及数据库技术等众多现代信息技术的综合运用，对于显著提升我国农业信息化水平有着良好的示范引领效应。

此外，近年来国家层面高度重视农产品电子商务的发展，接连出台了诸如《关于促进电子商务发展的若干意见》《“十四五” 电子商务发展规划》等一系列政策文件，为农产品电商构筑了极为有利的政策环境。在政策的积极引导以及市场需求的强劲驱动下，深入研究并开发出符合我国国情的农产品电商系统，对于优化农业产业结构、引领农产品流通方式的变革、增强农产品在市场上的竞争力等诸多方面，都有着不可忽视的重要现实意义。

## 国内外研究现状

在国外农产品电商起步较早，已形成较为成熟体系。美国的Amazon Fresh、Walmart Grocery借助强大物流网络和技术支持，提供全品类农产品服务，采用"中央仓储+冷链配送"模式。欧洲注重质量溯源和有机认证，如法国创新"社区支持农业"模式。日本结合精细化管理和高品质服务，实现生产者信息透明。国外研究聚焦供应链优化、冷链物流、消费者行为及平台运营模式等。

国内农产品电商虽起步较晚，但近十年发展迅速。学者研究集中于电商模式、平台设计、制约因素及区域策略等方面。实践中，以阿里巴巴、京东、拼多多等大型平台为主导，地方和垂直平台为补充，直播电商、社区团购等新业态带来新机遇。

不过，国内农产品电商系统研究仍存在问题：功能模块设计同质化，缺乏深度定制；品质管理和溯源信息化程度低；数据分析挖掘不足，难为决策提供支持；系统与用户体验未充分考虑农村用户特点。这些问题限制了系统应用效果和推广范围。

## 研究目标与内容

针对上述研究背景和现状，本项目致力于开发一款功能全面、运行稳定且操作便捷的农产品电商平台，以应对当前农产品销售领域中信息不对称、流通效率低等问题，推动农产品销售模式的革新。项目主要目标如下：

通过需求调研，明确平台功能和非功能需求，构建契合农产品销售特性的系统架构，满足多类用户群体的业务需求。系统需具备快速响应、高并发处理和稳定运行能力，以应对销售高峰期的流量压力。

采用前后端分离的架构，运用Spring Boot、Vue.js等技术框架，实现系统的高效开发与稳定运行。前端注重界面简洁与易用性，适应不同用户的操作习惯；后端聚焦农产品业务处理、数据存储。数据库设计遵循规范化原则并兼顾性能优化，确保数据存储与访问的可靠性<sup>\[3\]</sup>。

完成系统开发后，进行全面的测试与性能评估，验证功能完整性、稳定性和安全性，并通过实际案例验证系统对农产品销售效率提升的实际效果。总结开发经验与不足，提出后续优化与功能拓展建议。

# 相关技术介绍

本章将对本系统所采用的关键技术进行介绍，包括前后端分离架构、Spring Boot框架、Vue.js前端框架以及数据库技术。

## 前后端分离技术

### 前后端分离技术的概念

前后端分离是一种软件架构设计模式，它将应用程序分为前端（客户端）和后端（服务器端）两个相对独立的部分。在这种模式下，前端主要负责用户界面和交互逻辑，后端则专注于业务逻辑处理和数据存取。两者通过API接口进行通信，通常采用RESTful等规范。

传统的Web应用开发方式通常将前端页面和后端逻辑紧密耦合在一起，由服务器直接生成完整的HTML页面返回给浏览器。而前后端分离架构则将两者解耦，前端通过API获取数据后，在客户端进行渲染和展示。

### 前后端分离技术的优势

①实现了关注点分离，使前端开发人员可以专注于用户界面和用户体验的优化，后端开发人员则专注于业务逻辑和数据处理，从而使团队分工更加明确。

②前后端可以采用不同的技术栈，各自选择最适合的工具和框架，不会相互制约。

③支持并行开发，前后端团队可以基于约定好的API接口规范同时进行开发，不必等待对方完成才能开始工作，大大提高了开发效率。

### 在本系统中的应用

在本系统中，采用前后端分离架构可以为用户提供更流畅的购物体验，特别是在商品浏览、搜索筛选和购物车管理等交互频繁的场景中。同时，后端可以独立处理订单管理、库存控制和支付处理等复杂的业务逻辑，确保系统的稳定性和安全性。

此外，农产品电商系统未来可能需要开发移动端应用，前后端分离架构可以让后端服务同时支持Web端和移动端，避免重复开发，为系统的长期演进提供了灵活性。通过前后端分离，系统可以更好地适应业务变化和技术发展，降低维护成本，提升用户满意度。

## Spring Boot技术

### Spring Boot技术的概述

Spring Boot是基于Spring框架的一个快速开发工具，旨在简化Spring应用的初始化、配置和开发过程。它采用"约定优于配置"的原则，提供了大量的默认配置，使开发人员能够快速构建独立的、生产级别的Spring应用。

Spring Boot通过其自动配置、起步依赖和内嵌式Web服务器等特性，大大降低了Spring应用的开发复杂度，减少了繁琐的XML配置，让开发人员能够更多地关注业务逻辑而非框架配置<sup>\[4\]</sup>。这种简化的开发方式使得即使是对Spring框架不太熟悉的开发者也能快速上手，大幅提高了开发效率和项目质量。

### Spring Boot在本系统中的应用

在本系统中，Spring Boot主要用于构建后端服务，提供RESTful API供前端调用。系统通过Spring Security实现用户认证与授权管理，实现基于角色的访问控制，确保系统安全。商品管理、订单处理、支付集成等核心业务功能通过Spring Boot的各种组件高效实现，提供稳定可靠的服务。

系统的数据访问层通过Mybatisplus简化数据库操作，减少样板代码，提高开发效率。此外，系统还通过Spring Boot集成第三方服务，如支付宝支付接口等来扩展系统功能。Spring Boot的应用使得本系统后端服务具有良好的性能、可靠性和可维护性，为前端提供强有力的支持。

## Vue.js技术

### Vue.js概述

Vue.js是一个用于构建用户界面的渐进式JavaScript框架，由尤雨溪创建于2014年。Vue.js被设计为可以自底向上逐层应用：Vue核心库只关注视图层，易于上手，方便与其他库或已有项目整合<sup>\[5\]</sup>。

Vue.js的特点是轻量级、高效、灵活，拥有简洁的API和友好的学习曲线，使得它在全球范围内得到了广泛的应用和快速的普及。相较于其他前端框架，Vue.js在保持强大功能的同时，提供了更低的入门门槛和更少的概念负担，使得开发者能够快速上手并高效开发。这些特性使Vue.js成为目前最受欢迎的前端框架之一，广泛应用于各类Web应用开发中。

### Vue.js在本系统中的应用

在本系统中，Vue.js主要用于开发前端界面，为用户提供流畅的购物体验。系统通过Vue.js构建响应式的商品列表和详情页，实现商品的快速浏览和筛选，提供流畅的用户交互。购物车和结算流程通过组件化管理复杂的表单和状态，确保用户能够轻松完成购物过程。用户登录、注册和个人中心等功能模块同样基于Vue.js开发，提供直观的用户界面和良好的操作体验。

## 数据库技术

### MySQL数据库

MySQL是一个开源的关系型数据库管理系统，以其性能、可靠性和易用性而广受欢迎，特别适合Web应用。MySQL支持多种存储引擎，最常用的是InnoDB和MyISAM，其中InnoDB支持事务、外键和行级锁定，适合处理高并发的OLTP（联机事务处理）场景。MySQL的查询性能优秀，特别是在读操作方面，适合读多写少的应用场景，这与电商系统的特性高度匹配。

MySQL提供了数据库复制、备份恢复等功能，确保数据安全，减少数据丢失风险。同时，MySQL易于安装、配置和使用，拥有丰富的文档和社区支持，降低了系统开发和维护的难度。在扩展性方面，MySQL支持主从复制、分库分表等扩展方案，能够应对数据量增长，满足系统长期发展需求<sup>\[6\]</sup>。此外，MySQL可以在多种操作系统上运行，包括Windows、Linux、Mac OS等，具有良好的跨平台性，增加了系统部署的灵活性。

### 数据库在本系统中的应用

在本系统中，数据库技术广泛应用于各个业务领域。用户管理模块依靠数据库存储用户基本信息、账号密码、收货地址、购物历史等数据，为用户提供个性化服务和安全访问。商品管理模块使用数据库存储商品基本信息、分类、价格、库存、图片路径等数据，支持商品的展示、搜索和筛选功能。订单管理模块则记录订单信息、订单状态、支付信息、收货信息等，跟踪订单全生命周期，确保订单处理的准确性和时效性<sup>\[7\]</sup>。

库存管理模块通过数据库跟踪商品库存变化，记录库存历史，支持库存预警，防止超卖和库存积压。支付管理模块记录支付流水、支付状态、退款信息等，确保交易安全和资金流转的准确性。统计分析功能依赖数据库存储销量数据、用户行为数据，支持数据分析和决策支持，帮助商家了解销售情况和用户偏好。系统管理模块则使用数据库存储系统配置、权限设置、操作日志等，便于系统维护和安全审计。数据库在这些应用中发挥着至关重要的作用，是系统正常运行的基础。

以上技术的综合应用，为农产品电商系统提供了坚实的技术基础，确保系统能够满足功能性和非功能性需求，为用户提供高质量的服务。

# 系统需求分析

## 功能性需求分析

根据对系统的整体规划和用户需求的分析，将系统的功能性需求划分为四个主要模块：用户与权限管理模块、产品与分类管理模块、订单与支付管理模块以及系统支持与分析模块<sup>\[8\]</sup>。以下将对这四个模块的具体功能需求进行详细分析。

### 用户与权限管理模块

用户与权限管理模块作为系统的基础模块，需要负责用户身份的认证与授权，确保系统的安全性和可控性。该模块应包括用户管理、角色与权限管理以及动态菜单管理三个主要功能。

用户管理功能需要支持新用户注册并收集必要的用户信息，提供安全的密码登录和短信验证码登录，实现基于手机号的密码重置，允许用户查看和修改个人基本信息、联系方式和收货地址，并应实现用户账号的启用、禁用和注销功能。

角色与权限管理功能应支持多种角色分配，包括超级管理员、普通管理员、商户和普通用户，需要实现基于角色的权限控制，确保用户只能访问和操作其权限范围内的功能和数据，并应允许管理员调整用户角色和权限以适应业务变化需求。

动态菜单管理功能需要支持对系统菜单进行动态配置，包括菜单名称、路径和图标等，应根据用户角色动态生成导航菜单，确保用户只能看到有权限访问的功能菜单，并需要支持菜单的排序、分类管理和多级菜单结构。

### 产品与分类管理模块

产品与分类管理模块作为本系统的核心，需要提供对商品和分类的全面管理功能，确保用户能够方便地浏览和购买商品。该模块应包括产品管理、分类管理、产品推荐、收藏管理和轮播图管理五个主要功能。

产品管理功能需要支持对产品基本信息的添加、修改、查询和删除，包括产品名称、描述、价格和图片等，应实现产品的上架和下架操作，支持产品的批量导入、导出和删除，并应提供丰富的产品详情页面，展示产品的详细信息、图片和规格。

分类管理功能需要支持对分类信息的添加、修改、查询和删除，包括分类名称、图标和描述等，应实现多级分类结构，支持将产品与分类关联，并需要提供分类的排序管理功能，优化前端分类展示效果。

产品推荐功能应基于用户行为的协同过滤算法，为用户提供个性化商品推荐，需要根据商品销量和收藏量向用户推荐热门商品，根据当前浏览商品推荐相关联的商品，并应支持对推荐算法和策略的配置和管理。

收藏管理功能需要允许用户收藏感兴趣的商品，查看和管理已收藏的商品列表，应实时更新商品的收藏状态，并支持取消收藏操作。

轮播图管理功能需要支持对首页轮播图的添加、修改、查询和删除，应实现轮播图的排序管理，设置轮播图的跳转链接，并需要支持轮播图的启用和禁用功能。

### 订单与物流管理模块

订单与物流管理模块需要负责处理用户的购物流程，包括购物车管理、订单处理、支付处理、物流管理等核心功能。

购物车管理功能需要支持用户将商品添加到购物车并指定购买数量，显示购物车中的所有商品信息、价格和数量，应允许用户修改购物车中商品的购买数量或删除不需要的商品，并需要支持购物车结算生成订单。

订单管理功能应根据用户选择的商品和收货信息创建新订单，需要支持用户查询订单列表和详情，管理员查询所有订单，应实现完整的订单状态流转，需要允许用户在一定条件下取消未处理的订单，并应支持订单的退款申请和处理流程。

支付管理功能需要集成支付宝支付，支持PC端网页支付，应实现完整的支付流程（包括订单创建、支付处理、结果通知等），需要处理支付结果并更新订单状态和商品库存，并应支持订单的退款申请和处理。

物流管理功能需要记录和管理订单的物流配送信息，支持商家为已支付订单填写物流信息并发货，应记录物流状态变化并同步更新订单状态，需要允许用户确认收货完成物流流程，并应提供物流信息查询功能。

### 系统支持与分析模块

系统支持与分析模块需要提供对系统运行的支持和数据分析功能，帮助管理员了解系统运行状况和用户行为，为业务决策提供数据支持。该模块应包括数据分析、通知管理和资讯管理三个主要功能。

数据分析功能需要统计分析商品的销售情况（包括销售量和销售额），分析用户注册和活跃情况，统计分析订单数量和金额，并需要通过图表直观展示统计数据。

通知管理功能需要支持对通知消息的添加、查询和删除，在前台首页应实现通知轮播展示与查看详细功能。

资讯管理功能需要支持对资讯文章的添加、修改、查询和删除，实现资讯文章的分类管理，应在前台页面展示资讯文章并提供阅读功能。

## 非功能性需求分析

除了功能性需求外，系统还需要满足一系列非功能性需求，以确保系统运行稳定、高效和安全。以下是系统需要满足的主要非功能性需求：

### 性能需求

本系统性能需求主要包含以下三方面要求：①响应速度优化：确保用户高频操作快速完成，重点页面加载效率优于常规页面；②并发处理能力：支持多用户同时操作系统时保持稳定，避免卡顿或服务中断；③吞吐量保障：对数据查询、接口调用等操作进行效率优化。针对复杂业务场景建立分级处理机制，通过缓存策略和负载均衡技术提升系统整体性能，保证在常规运行环境下各功能模块流畅可用<sup>\[9\]</sup>。

### 可用性需求

本系统可用性需求主要包含以下维度：

①要求系统具备持续稳定运行能力。日常维护需避开业务高峰期操作，当非核心模块出现异常时，至少保障主要功能模块的正常使用。

②异常处理机制  
建立输入验证与异常检测机制，能够自动识别网络通信故障、服务器资源过载等常见问题。前端界面需提供用户友好的错误提示，后端服务对关键业务流程实施事务回滚保护，防止错误数据扩散。

### 安全性需求

系统的安全性需求主要包括认证与授权、数据安全和防攻击措施三个方面。在认证与授权方面，系统应实现基于角色的访问控制（RBAC），确保用户只能访问被授权的功能和数据，敏感操作应要求用户重新认证或进行二次确认，并需要防止未经授权的访问（包括对API和后台系统的保护）<sup>\[10\]</sup>。

在数据安全方面，用户密码应使用强哈希算法存储（如bcrypt），敏感数据传输应使用HTTPS协议确保数据传输过程的安全性，用户个人信息和支付信息等敏感数据应进行加密存储，并需要定期进行安全审计检测潜在的安全漏洞<sup>\[11\]</sup>。

# 详细设计

## 系统总体架构设计

### 总体架构概述

本系统采用前后端分离的现代化架构设计，基于Spring Boot + Vue.js实现全栈解决方案。系统架构分为前端展示层、后端服务层和数据持久层三个主要部分，各层之间通过RESTful API进行数据交互。整体架构遵循高内聚低耦合的设计原则，具有良好的可扩展性和可维护性<sup>\[12\]</sup>。

图 4‑1 系统架构图

### 前端展示层

前端展示层基于Vue.js框架构建，结合Element UI组件库实现前端页面。主要包括以下组成部分：

表 4‑1 前端组件构成

|     |     |     |
| --- | --- | --- |
| 组件名称 | 文件夹名 | 作用  |
| 视图组件 | Views | 负责页面渲染和用户交互 |
| 公共组件 | Components | 封装可复用的UI组件 |
| 路由管理 | Router | 基于Vue Router实现前端路由 |
| 通用工具类 | utils | 封装http、日期处理等通用工具 |

### 后端服务层

后端服务层基于Spring Boot框架构建，采用典型的多层架构设计，提供RESTful风格的API接口。主要包括以下层次：

表 4‑2 后端服务层组成

|     |     |     |
| --- | --- | --- |
| 层次名称 | 文件夹名 | 作用  |
| 控制器层 | Controller | 接收和响应HTTP请求 |
| 服务层 | Service | 实现核心业务逻辑，处理事务管理和数据校验 |
| 数据访问层 | Mapper | 负责数据库操作，实现数据持久化 |
| 实体层 | Entity | 定义业务实体类，映射数据库表结构 |
| 工具类 | Util | 提供通用功能支持，如JWT令牌生成、密码加密等 |

后端服务采用面向接口编程，业务功能模块间通过依赖注入实现松耦合设计。系统集成了Swagger自动生成API文档，便于前后端协作开发。

### 关键技术实现

身份认证与授权：采用基于JWT(JSON Web Token)的无状态认证机制，结合BCrypt密码加密保障账户安全。通过角色(如SUPER_ADMIN、ADMIN、MERCHANT、USER)实现权限分级控制。

数据交互格式：前后端数据交互统一采用JSON格式，使用统一的Result响应对象封装返回结果，包含状态码、消息和数据三部分，便于前端处理。

异常处理机制：实现全局异常处理器，统一捕获并处理系统异常，转换为友好的错误提示，提高系统稳定性。

事务管理：采用Spring声明式事务管理，通过@Transactional注解确保关键业务操作的原子性，如订单创建、支付处理等。

日志系统：集成SLF4J和Logback实现分级日志记录，对关键操作和异常情况进行记录，便于问题排查和系统监控。

## 后端详细设计

### 项目结构设计

项目采用典型的Spring Boot分层架构，项目结构清晰划分为多个功能模块。主要目录结构包括：controller存放API接口控制器；service及其实现类service.impl处理业务逻辑；entity定义数据实体；mapper接口实现与数据库交互；common包含公共组件如Result统一返回对象。系统集成了Swagger用于API文档自动生成，通过@Schema、@Operation等注解提供接口说明。项目配置采用application.application作为主配置文件。实体类广泛使用Lombok的@Data注解简化代码，通过MyBatis-Plus的@TableId、@TableField等注解实现ORM映射。项目集成了全局异常处理，统一捕获并处理系统异常，将各类异常转换为标准的Result对象返回给前端。系统使用SLF4J和Logback实现日志管理，记录关键操作和异常情况，便于问题排查和系统监控。

### 业务逻辑层设计

业务逻辑层是系统的核心，负责实现各项业务功能并封装业务规则。所有Service实现定义在service包中，主要包含：

UserService：实现用户管理，包括createUser、login、updateUser、forgetPassword等方法，通过BCryptPasswordEncoder加密存储密码

ProductService：提供商品管理，实现createProduct、getProductsByPage、deleteProduct等功能，支持商品库存和状态管理

OrderService：处理订单业务，包括createOrder、payOrder、getOrdersByPage、handleRefund等方法，严格控制订单状态流转

CartService：管理购物车功能，实现addToCart、getCartByUserId、updateCart等操作，处理购物车商品的增删改查

业务层方法如payOrder、handleRefund等使用@Transactional注解保证事务一致性。系统通过new QueryWrapper&lt;User&gt;().eq()等方式实现条件查询。业务方法实现了完整的参数校验和业务规则验证，如库存检查product.getStock() < order.getQuantity()，确保数据合法性。业务处理结果统一封装在Result对象中返回，包含状态码、消息和数据。日志记录通过LOGGER.info("创建订单成功，订单ID：{}", order.getId())等方式实现关键操作记录。业务层针对不同角色实现了数据权限控制，确保商户只能管理自己的商品，管理员可管理所有数据。

### 数据访问层设计

数据访问层基于MyBatis-Plus实现，通过mapper包中的接口与数据库交互。系统的主要Mapper接口包括：

UserMapper：处理用户数据操作，继承BaseMapper&lt;User&gt;获得基础CRUD功能

ProductMapper：管理商品数据，支持分页和条件查询

OrderMapper：订单数据操作，实现订单创建和状态更新

CartMapper：购物车数据处理，支持查询和更新功能

数据查询广泛使用LambdaQueryWrapper构建动态条件，如queryWrapper.eq(xxx)方式指定精确匹配条件，queryWrapper.like(xxx)实现模糊查询。分页查询通过Page&lt;Order&gt; page = new Page<>(currentPage, size)创建分页对象，结合orderMapper.selectPage(page, queryWrapper)实现高效分页。系统使用多表关联查询填充关联数据，如订单查询后通过order.setUser(xxx)和order.setProduct(xxx)填充用户和商品信息。实体类与表映射通过注解配置，如@TableName("order")解决关键字冲突，@TableField(exist = false)标记非数据库字段。数据层严格控制SQL执行，避免全表扫描和复杂连接，保证查询效率。

### 控制器层设计

控制器层位于controller包，负责接收HTTP请求并调用服务层处理业务逻辑。主要控制器包括：

UserController：提供/user/login、/user/add、/user/{id}等接口，处理用户认证和管理

ProductController：实现/product/page、/product/{id}等接口，支持商品查询和管理

OrderController：提供/order、/order/page、/order/{id}/handle-refund等接口，处理订单操作

CartController：实现/cart/user/{userId}、/cart/{id}等接口，支持购物车功能

控制器方法使用Spring MVC注解映射请求路径，如@PostMapping("/login")、@GetMapping("/page")，明确指定HTTP方法。参数通过@RequestBody接收JSON数据，@PathVariable获取路径参数，@RequestParam接收查询参数。接口权限控制通过请求参数和服务层逻辑实现，如商户只能访问自己创建的商品和订单。控制器方法返回统一的Result对象，根据处理结果设置不同状态码和消息，如return Result.success(user)表示成功，return Result.error("-1", "用户名已存在")表示失败。异常处理通过try-catch块捕获并处理特定异常，未捕获的异常由全局异常处理器统一处理。接口文档通过Swagger注解@Operation(summary = "分页查询订单列表")等提供API说明，便于前端开发人员理解和使用接口<sup>\[13\]</sup>。

## 前端详细设计

### Vue项目结构设计

项目基于Vue.js框架构建，采用标准的Vue CLI项目结构，实现了清晰的功能模块划分。主要目录包括：

src/views: 存放页面级组件，按功能模块分为前台(front)和后台(admin)两大类，如用户注册(RegisterVue.vue)、登录(Login.vue)、商品管理(ProductManager.vue)等

src/components: 存放可复用的UI组件，如商品卡片(ProductCard.vue)等

src/router: 定义路由配置，支持路由懒加载和权限控制

src/utils: 工具类函数，如请求封装模块(request.js)

src/assets: 静态资源文件，包括图片、样式等

项目集成了Element UI组件库，提供统一的界面风格和交互体验。静态资源采用模块化管理，通过import语法按需加载。API请求封装在request.js中，基于Axios实现统一的请求拦截、响应处理和错误管理。项目使用模块化CSS，采用scoped特性确保样式隔离，防止样式冲突。系统实现了响应式设计，通过媒体查询和弹性布局，适配不同屏幕尺寸。

### 组件设计与开发

系统组件设计遵循单一职责原则，组件粒度适中，实现了高度复用性。主要组件类型包括：

页面组件: 如OrderManager.vue、UserCenter.vue等，实现完整业务流程。

功能组件: 如ProductCard.vue商品卡片组件，集成展示、收藏、加入购物车等功能。

表单组件: 如用户注册表单、商品编辑表单等，实现数据收集和验证。

对话框组件: 如退款处理对话框、地址选择对话框等，实现交互操作。

组件通信采用多种方式：props向下传递数据，$emit向上传递事件，在父子组件间构建数据流；复杂场景使用事件总线($bus)或本地存储实现跨组件通信。组件生命周期管理规范，created钩子用于初始化数据和发起API请求，mounted钩子处理DOM操作，beforeDestroy执行清理工作。表单验证通过Element UI的验证规则实现，如rules: { name: \[{ required: true, message: '请输入商品名称', trigger: 'blur' }\] }定义必填项验证。组件实现了按需加载和异步渲染策略，如商品列表使用v-if控制渲染时机，提高页面加载性能<sup>\[14\]</sup>。针对重复操作实现了防抖处理，如搜索输入框使用lodash的debounce函数优化查询请求频率。

### 路由设计

系统路由基于Vue Router实现，采用history模式提供友好的URL形式，结合静态定义和动态生成的方式构建完整的路由系统。路由结构清晰划分为多个功能区域：公共访问区、前台用户区和后台管理区。

公共访问区：包括登录(/login)、注册(/register)和忘记密码(/forget)等页面，采用嵌套路由结构，共享LRLayout父组件作为统一布局。

前台用户区：包含面向普通用户的页面，如首页(/)、商品列表(/products)、商品详情(/product/:id)、购物车(/cart)、收藏夹(/favorite)、订单管理(/order)和个人中心(/user-center)等，支持动态路由参数和查询参数。

后台管理：通过动态路由方式加载，包括管理首页(/showView)、菜单管理(/menu)以及根据用户权限动态加载的其他管理页面。动态路由通过setRoutes()函数从localStorage中获取用户菜单权限，解析菜单数据动态构建路由配置并通过router.addRoute()方法添加到路由表，实现基于角色的精确权限控制。

系统还实现了完善的路由错误处理，通过router.onError捕获模块加载失败等异常，自动跳转到404页面；对无匹配路由进行处理，根据登录状态决定重定向策略；重写VueRouter.prototype.push处理重复导航错误。通过localStorage.setItem('currentPathName', to.name)记录当前路径，便于实现菜单高亮和导航状态保持，提升用户体验。整体路由设计既确保了核心路由的稳定性，又提供了基于用户权限的灵活访问控制，是系统权限管理和导航体系的基础。

### 状态管理设计

系统状态管理采用轻量级方案，主要通过本地存储(localStorage)实现关键数据的持久化和共享。主要状态数据包括：

用户信息: 登录成功后将用户数据存储在localStorage中，区分前台用户(frontUser)和后台用户(backUser)

菜单权限: 用户登录后从后端获取的菜单列表存储在userMenuList中，用于动态生成导航菜单和路由

登录状态: 通过JWT令牌(token)管理用户会话状态，令牌存储在localStorage中。

记住密码: 通过rememberMe、username和password字段实现记住密码功能

当前路径: 通过currentPathName记录当前活动路由，用于导航状态管理

状态更新方式主要通过直接操作localStorage实现，如登录成功后：

localStorage.setItem("token", res.data.token);

localStorage.setItem("frontUser", JSON.stringify(res.data));

系统在组件中通过读取localStorage获取状态数据，实现组件间的状态共享。路由导航守卫与状态管理紧密结合，通过检查localStorage中的用户信息和菜单权限，实现基于角色的访问控制。请求拦截器中自动从localStorage获取token并添加到请求头，实现身份验证。

## 数据库设计数据库设计概述

本系统采用关系型数据库MySQL作为数据存储方案，通过精心设计的数据库结构支撑农产品销售平台的各项业务功能。数据库设计遵循实体完整性、参照完整性和域完整性等原则，确保数据的一致性和可靠性<sup>\[15\]</sup>。根据系统功能模块划分，数据库设计主要分为用户与账户管理、产品与交易管理、订单与物流管理以及系统管理与分析四个部分。

## 数据库E-R图

### 用户与权限管理模块E-R图

### 产品与分类模块E-R图

### 订单与物流模块E-R图

### 系统支持与分析模块E-R图

## 数据库表设计

### 用户与权限管理模块

#### 用户表（user）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 用户ID | BIGINT NOT NULL AUTO_INCREMENT | 主键  |
| username | 用户名 | VARCHAR(50) NOT NULL | 唯一索引 |
| password | 密码  | VARCHAR(100) NOT NULL | BCrypt加密存储 |
| name | 真实姓名 | VARCHAR(50) NOT NULL |     |
| role | 用户角色 | ENUM('SUPER_ADMIN','ADMIN', | 系统角色划分 |
|     |     | 'FARMER','USER') |     |
| email | 电子邮箱 | VARCHAR(50) NOT NULL | 唯一约束 |
| status | 账号状态 | TINYINT NOT NULL DEFAULT 1 | 0-禁用，1-启用 |
| created_at | 创建时间 | TIMESTAMP DEFAULT CURRENT | 自动记录 |
| updated_at | 更新时间 | TIMESTAMP DEFAULT CURRENT | 自动更新 |

#### 系统菜单表（sys_menu）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 菜单ID | INT AUTO_INCREMENT | 主键  |
| name | 菜单名称 | VARCHAR(255) |     |
| path | 路由路径 | VARCHAR(255) |     |
| icon | 菜单图标 | VARCHAR(255) | Element UI图标名称 |
| description | 描述  | VARCHAR(255) |     |
| pid | 父菜单ID | INT |     |
| page_path | 组件路径 | VARCHAR(255) | Vue组件路径 |
| sort_num | 排序号 | INT |     |
| role | 访问角色 | TEXT | JSON数组存储权限角色 |

#### 系统字典表（sys_dict）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 字典ID | BIGINT AUTO_INCREMENT | 主键  |
| dict_type_code | 字典类型编码 | VARCHAR(255) NOT NULL | 唯一索引 |
| dict_type_name | 字典类型名称 | VARCHAR(255) NOT NULL |     |
| description | 描述  | TEXT |     |
| sort_order | 排序号 | INT DEFAULT 0 |     |
| create_time | 创建时间 | DATETIME DEFAULT CURRENT |     |
| update_time | 更新时间 | DATETIME DEFAULT CURRENT | 自动更新 |

#### 字典项表（dict_item）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 项ID | BIGINT AUTO_INCREMENT | 主键  |
| dict_type_code | 字典类型编码 | VARCHAR(255) NOT NULL | 外键关联sys_dict表 |
| item_key | 字典键 | VARCHAR(255) NOT NULL | 唯一约束 |
| item_value | 字典值 | VARCHAR(255) NOT NULL |     |
| description | 描述  | TEXT |     |
| create_time | 创建时间 | DATETIME DEFAULT CURRENT |     |
| update_time | 更新时间 | DATETIME DEFAULT CURRENT | 自动更新 |

### 产品与分类模块

#### 商品表（product）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 商品ID | BIGINT AUTO_INCREMENT | 主键  |
| name | 商品名称 | VARCHAR(100) NOT NULL | 建立全文索引 |
| description | 商品描述 | LONGTEXT |     |
| price | 价格  | DECIMAL(10,2) NOT NULL |     |
| stock | 库存数量 | INT DEFAULT 0 |     |
| category_id | 分类ID | BIGINT NOT NULL | 外键关联category表 |
| image_url | 图片地址 | VARCHAR(255) |     |
| sales_count | 销量  | INT DEFAULT 0 |     |
| farmer_id | 农户ID | BIGINT NOT NULL | 外键关联user表 |
| status | 商品状态 | TINYINT DEFAULT 1 | 0-下架，1-上架 |
| is_discount | 是否折扣 | TINYINT | 0-否，1-是 |
| discount_price | 折扣价 | DECIMAL(10,2) |     |
| created_at | 创建时间 | TIMESTAMP DEFAULT CURRENT |     |
| updated_at | 更新时间 | TIMESTAMP DEFAULT CURRENT | 自动更新 |

#### 分类表（category）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 分类ID | BIGINT AUTO_INCREMENT | 主键  |
| name | 分类名称 | VARCHAR(50) NOT NULL |     |
| description | 分类描述 | TEXT |     |
| icon | 分类图标 | VARCHAR(255) |     |
| created_at | 创建时间 | TIMESTAMP DEFAULT CURRENT |     |
| updated_at | 更新时间 | TIMESTAMP DEFAULT CURRENT | 自动更新 |

#### 评价表（review）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 评价ID | BIGINT AUTO_INCREMENT | 主键  |
| user_id | 用户ID | BIGINT NOT NULL | 外键关联user表 |
| product_id | 商品ID | BIGINT NOT NULL | 外键关联product表 |
| rating | 评分  | TINYINT NOT NULL | 1-5星 |
| content | 评价内容 | TEXT |     |
| status | 审核状态 | TINYINT DEFAULT 0 | 0-待审核，1-通过，2-拒绝 |
| created_at | 创建时间 | TIMESTAMP DEFAULT CURRENT |     |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 轮播ID | BIGINT AUTO_INCREMENT | 主键  |
| image_url | 图片地址 | VARCHAR(255) NOT NULL |     |
| tag | 标签文本 | VARCHAR(50) |     |
| title | 标题  | VARCHAR(100) NOT NULL |     |
| description | 描述  | TEXT |     |
| product_id | 关联商品 | BIGINT DEFAULT 0 | 外键关联product表 |
| sort_order | 排序顺序 | INT DEFAULT 0 |     |
| status | 状态  | TINYINT DEFAULT 1 | 0-禁用，1-启用 |

#### 入库记录表（stock_in）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 其他说明 |
| id  | 入库ID | BIGINT, 主键, 自增 | 唯一标识入库记录 |
| product_id | 商品ID | BIGINT, NOT NULL | 关联product表(id) |
| quantity | 入库数量 | INT, NOT NULL | 单次入库的商品数量 |
| unit_price | 单价  | DECIMAL(10,2), NOT NULL | 商品入库时的采购单价 |
| total_price | 总价  | DECIMAL(10,2), NOT NULL | 自动计算为quantity \* unit_price |
| supplier | 供应商 | VARCHAR(100) | 允许为空，供应商名称 |
| stock_date | 入库日期 | DATE, NOT NULL | 入库操作的具体日期 |
| operator_id | 操作人ID | BIGINT, NOT NULL | 关联user表(id)，记录入库操作人员 |
| remark | 备注  | VARCHAR(255) | 允许为空，补充说明入库细节 |
| status | 状态  | TINYINT, DEFAULT 1 | 0-作废, 1-正常 |
| created_at | 创建时间 | TIMESTAMP | 默认当前时间 |
| updated_at | 更新时间 | TIMESTAMP | 自动更新为当前时间 |

#### 出库记录表（stock_out）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 其他说明 |
| id  | 出库ID | BIGINT, 主键, 自增 | 唯一标识出库记录 |
| product_id | 商品ID | BIGINT, NOT NULL | 关联product表(id) |
| quantity | 出库数量 | INT, NOT NULL | 单次出库的商品数量 |
| unit_price | 单价  | DECIMAL(10,2), NOT NULL | 出库时商品的单价（销售价或损耗价） |
| total_price | 总价  | DECIMAL(10,2), NOT NULL | 自动计算为quantity \* unit_price |
| type | 出库类型 | TINYINT, NOT NULL | 1-销售出库, 2-损耗出库, 3-其他出库 |
| customer_name | 客户姓名 | VARCHAR(50) | 允许为空，销售出库时记录客户名称 |
| order_no | 订单号 | VARCHAR(50) | 允许为空，关联的销售订单编号 |
| operator_id | 操作人ID | BIGINT, NOT NULL | 关联user表(id)，记录出库操作人员 |
| remark | 备注  | VARCHAR(255) | 允许为空，补充说明出库细节 |
| status | 状态  | TINYINT, DEFAULT 1 | 0-作废, 1-正常 |
| created_at | 创建时间 | TIMESTAMP | 默认当前时间 |
| updated_at | 更新时间 | TIMESTAMP | 自动更新为当前时间 |

### 订单与物流模块

#### 订单表（order）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 订单ID | BIGINT AUTO_INCREMENT | 主键  |
| user_id | 用户ID | BIGINT NOT NULL | 外键关联user表 |
| total_price | 订单总价 | DECIMAL(10,2) NOT NULL |     |
| status | 订单状态 | TINYINT DEFAULT 0 | 0-待支付，1-已支付，2-已发货，3-已完成，4-已取消 |
| last_status | 前序状态 | TINYINT DEFAULT 0 | 用于状态回滚 |
| refund_status | 退款状态 | TINYINT DEFAULT 0 | 0-无退款，1-申请退款，2-退款中，3-已退款，4-失败 |
| product_id | 商品ID | BIGINT NOT NULL | 外键关联product表 |
| quantity | 购买数量 | INT NOT NULL |     |
| price | 商品单价 | DECIMAL(10,2) NOT NULL |     |
| recv_address | 收货地址 | TEXT | JSON格式存储地址信息 |
| recv_phone | 联系方式 | VARCHAR(255) |     |
| created_at | 创建时间 | TIMESTAMP DEFAULT CURRENT |     |
| updated_at | 更新时间 | TIMESTAMP DEFAULT CURRENT | 自动更新 |

#### 物流信息表（logistics）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 其他说明 |
| id  | 物流ID | BIGINT, 主键, 自增 | 唯一标识物流记录 |
| order_id | 订单ID | BIGINT, NOT NULL | 关联订单表(id) |
| receiver_name | 收货人姓名 | VARCHAR(50), NOT NULL | \-  |
| receiver_phone | 收货人电话 | VARCHAR(20), NOT NULL | \-  |
| receiver_address | 收货地址 | VARCHAR(255), NOT NULL | \-  |
| company_name | 物流公司名称 | VARCHAR(50), NOT NULL | \-  |
| tracking_number | 物流单号 | VARCHAR(50), NOT NULL | 唯一标识物流单号 |
| status | 物流状态 | TINYINT, DEFAULT 0 | 0-待发货, 1-已发货, 2-已签收, 3-已取消 |
| created_at | 创建时间 | TIMESTAMP | 默认值为当前时间 |
| updated_at | 更新时间 | TIMESTAMP | 自动更新为当前时间 |
| expected_arrival_time | 预计到达时间 | TIMESTAMP | 允许为空，物流预计到达时间 |

#### 购物车表（cart）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 购物车ID | BIGINT AUTO_INCREMENT | 主键  |
| user_id | 用户ID | BIGINT NOT NULL | 外键关联user表 |
| product_id | 商品ID | BIGINT NOT NULL | 外键关联product表 |
| quantity | 商品数量 | INT DEFAULT 1 |     |
| created_at | 创建时间 | TIMESTAMP DEFAULT CURRENT |     |
| updated_at | 更新时间 | TIMESTAMP DEFAULT CURRENT | 自动更新 |

### 系统支持与分析模块

#### 公告表（notice）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 备注  |
| id  | 通知ID | INT AUTO_INCREMENT | 主键  |
| title | 标题  | VARCHAR(255) NOT NULL |     |
| content | 内容  | TEXT NOT NULL |     |
| time | 发布时间 | DATETIME DEFAULT CURRENT |     |

#### 资讯表（article）

|     |     |     |     |
| --- | --- | --- | --- |
| 字段名 | 字段含义 | 字段属性 | 其他说明 |
| id  | 资讯ID | BIGINT, 主键, 自增 | 唯一标识资讯 |
| title | 资讯标题 | VARCHAR(200), NOT NULL | \-  |
| content | 资讯内容 | LONGTEXT, NOT NULL | 完整的资讯文章内容 |
| summary | 资讯摘要 | VARCHAR(500) | 允许为空，简要描述资讯内容 |
| cover_image | 封面图片URL | VARCHAR(255) | 允许为空，存储资讯封面图链接 |
| view_count | 浏览量 | INT, DEFAULT 0 | 记录资讯被访问次数 |
| status | 状态  | TINYINT, DEFAULT 1 | 0-下架, 1-上架，控制资讯显示状态 |
| created_at | 创建时间 | TIMESTAMP | 默认值为当前时间 |
| updated_at | 更新时间 | TIMESTAMP | 自动更新为当前时间 |

# 系统功能实现

本系统包含用户、产品、订单、物流、购物车、支付、库存、通知、资讯等多个模块，以下是本系统的功能模块图。

由于篇幅有限，本部分将展示系统的最核心模块的实现，即用户模块、产品模块、订单模块、购物车模块的实现。

## 用户模块实现

### 用户注册功能

用户注册流程中，前端通过表单收集用户信息，调用sendVerificationCode()方法向/email/sendEmail/${email}接口发送验证码请求，用户填写后提交表单，该方法首先调用this.$refs.registerForm.validate()进行客户端验证，然后通过request.post("/user/add", this.registerForm)将数据提交至后端。后端Controller层的@PostMapping("/user/add")接口接收请求并调用userService.createUser(user)方法，该方法使用MyBatis-Plus的QueryWrapper检验用户名和邮箱唯一性，通过BCryptPasswordEncoder.encode()加密密码<sup>\[16\]</sup>，最终调用userMapper.insert(user)完成用户创建。

### 用户登录功能

用户登录功能通过前端的onLogin()方法实现，该方法验证验证码后调用request.post("/user/login", this.loginForm)提交登录请求，后端login()方法使用bCryptPasswordEncoder.matches()验证密码，随后通过JwtTokenUtils.genToken()生成JWT令牌并通过MenusUtils.allocMenus()分配菜单权限。登录成功后，前端根据用户角色将用户信息存储在localStorage中，并导航至相应页面。

### 用户管理功能

用户管理模块中，管理员通过getList()方法调用Request.get('/user/page')获取分页用户数据，后端getUsersByPage()方法使用LambdaQueryWrapper构建多条件查询。管理员可执行删除操作，该操作调用handleDelete()方法向/user/delete/${id}发起请求，后端deleteUserById()方法通过deleteUserRelations()清理地址、订单等关联数据，再通过checkStockRelation()和checkUserProducts()检查关联关系，确保安全删除。

### 个人信息管理功能

个人信息管理则通过updateUserInfo()方法调用Request.put(/user/${id})更新基本信息，通过updatePassword()方法调用Request.put(/user/password)更新密码。密码修改过程中，系统要求验证原密码，通过bCryptPasswordEncoder.matches()确认身份后才允许更新。前端表单使用Element UI的验证规则确保数据有效性，后端通过ID匹配确保用户只能修改自己的信息。

## 产品模块的实现

### 产品管理功能

产品管理功能实现了对产品全生命周期的管理，从创建到删除的完整流程。管理员和商户通过前端页面的产品列表功能，调用getList()方法发起GET请求获取分页产品数据。后端Controller层通过@GetMapping("/page")接口接收请求，调用productService.getProductsByPage()方法处理，该方法使用MyBatis-Plus的LambdaQueryWrapper构建多条件查询。产品编辑功能通过handleEdit()方法打开编辑对话框，提交时通过PUT方法向后端发送更新请求，后端通过@PutMapping("/{id}")接口接收并调用productService.updateProduct()方法处理。删除功能通过handleDelete()方法调用DELETE向后端发起请求，后端在deleteProduct()方法中首先检查产品关联，通过carouselItemMapper.selectCount()等方法验证是否存在轮播图、订单等关联记录，确认安全后才执行productMapper.deleteById(id)删除操作。

### 前台产品展示功能

前台产品展示功能为用户提供了直观友好的产品浏览界面，包括列表页和详情页。列表页通过响应式网格布局展示产品，用户可通过分类筛选、排序等功能快速找到所需产品。系统前端通过getProducts()方法调用GET获取产品数据，参数中包含筛选条件、分类、排序字段等。后端接收请求后通过productService.getProductsByPage()方法查询数据。产品详情页通过路由参数获取产品ID，调用Request.get(/product/${id})获取产品详细信息，后端通过getProductById()方法处理，查询完成后通过categoryMapper.selectById(product.getCategoryId())填充关联的分类信息。产品卡片组件实现了收藏和加入购物车功能，通过handleFavorite()和handleAddToCart()方法分别调用相应接口。

### 产品查询功能

产品查询功能实现了模糊查询，支持按ID查询单个产品详情和多条件组合查询产品列表。前端搜索页面通过handleSearch()方法处理用户搜索请求，将关键词、分类、价格区间等条件通过Request.get('/product/page')接口发送至后端。后端searchProducts()方法接收参数并构建查询条件，通过query.like(Product::getName, keyword).or().like(Product::getDescription, keyword)实现关键词模糊匹配，支持产品名称和描述的搜索。价格区间查询通过SQL的CASE WHEN语句处理折扣价格的情况，确保搜索结果准确性。查询结果通过分页机制返回，在返回前自动填充分类和商户信息，提供完整的产品数据。

### 产品推荐实现

基于用户的协同过滤算法：本推荐模块采用基于用户的协同过滤算法(User-Based Collaborative Filtering)，这是一种经典的推荐算法，其核心思想是"相似的用户对商品有相似的偏好"。算法通过分析用户的历史行为数据，计算用户之间的相似度，为目标用户推荐其相似用户喜欢但自己尚未接触的商品。以下是实现步骤。

#### 用户行为收集与权重分配

系统对不同类型的用户行为赋予不同权重，以反映行为的重要程度：

|     |     |     |
| --- | --- | --- |
| 行为  | 权重  | 说明  |
| 购买  | 2   | 表示较强的用户偏好 |
| 收藏  | 1   | 表示一般程度的用户兴趣 |

首先需要收集用户的行为数据，作为推荐算法的输入。系统主要通过订单表和收藏表收集用户行为数据，构建用户-商品行为矩阵。在RecommendService的calculateUserSimilarity()方法中，系统首先通过orderWrapper.eq(Order::getStatus, 3)筛选已完成状态的订单，使用orderMapper.selectList(orderWrapper)获取所有有效订单数据。同时，系统通过favoriteWrapper.eq(Favorite::getStatus, 1)筛选有效的收藏记录，调用favoriteMapper.selectList(favoriteWrapper)获取收藏数据。获取数据后，系统使用HashMap和HashSet构建用户-商品映射关系，通过userProductMap.computeIfAbsent(order.getUserId(), k -> new HashSet<>())为每个用户创建商品集合，并将购买的商品ID添加两次实现2倍权重，收藏的商品ID添加一次实现1倍权重。这种权重设计基于业务理解：购买行为比收藏行为更能反映用户真实偏好。

#### 余弦相似度计算

用户相似度计算采用余弦相似度算法，该算法能有效衡量两个向量在多维空间中的夹角余弦值。

在相似度计算过程中，系统首先将所有用户ID提取到一个列表中，然后通过双重循环计算每对用户之间的相似度。对于用户对(user1, user2)，系统通过calculateCosineSimilarity(userProductMap.get(user1), userProductMap.get(user2))方法计算余弦相似度。该方法实现了余弦相似度公式：先计算两个用户商品集合的交集大小作为分子，然后计算两个集合大小的平方根乘积作为分母，相除得到相似度值。计算结果存储在一个二维HashMap结构的similarityMatrix中，其中similarityMatrix.get(user1).get(user2)表示用户1和用户2的相似度。为避免重复计算，系统只计算矩阵的上三角部分，然后将结果复制到下三角部分，保持矩阵的对称性。整个计算过程的时间复杂度为O(n²)，其中n为用户数量，空间复杂度也为O(n²)。

#### 推荐生成与评分计算

生成推荐列表是推荐系统的核心步骤，包括相似用户筛选、商品评分计算和最终推荐生成。系统通过findSimilarUsers()方法筛选出相似度超过阈值的用户。随后，在scoreProductsFromSimilarUsers()方法中，系统遍历每个相似用户的购买和收藏记录，对购买行为赋予相似度2倍的权重，收藏行为赋予相似度1倍的权重，通过productScores.merge()方法累加计算每个候选商品的推荐分数。系统会移除用户已交互过的商品，确保只推荐新商品。最后，使用优先队列对商品按分数排序，选取前N个（最多12个）商品作为推荐结果，通过productMapper.selectBatchIds()查询完整商品信息。

## 订单模块详细设计

订单模块采用了以Order实体为核心的关系型数据库设计，实现了完整的订单生命周期管理体系。系统通过status字段(0-待支付，1-已支付，2-已发货，3-已完成，4-已取消，5-退款中，6-已退款，7-退款失败)和refundStatus字段(0-无退款，1-申请退款，2-退款中，3-已退款，4-退款失败)实现了完整的订单状态管理。

### 订单管理功能

订单管理功能实现了后台订单的全生命周期管理，从创建到结束的完整流程。管理员和商户通过订单管理页面，调用getList()方法发起GET请求获取分页订单数据，非管理员用户自动添加merchantId参数限制只能查看自己的订单。后端Controller层通过@GetMapping("/page")接口接收请求，调用orderService.getOrdersByPage()方法处理。订单状态管理是核心功能，如退款处理通过handleRefund()方法调用PUT向后端发送请求，后端通过@Transactional注解保证事务性，在handleRefund()方法中验证订单状态、更新退款状态，并在同意退款时通过product.setStock(product.getStock() + order.getQuantity())恢复商品库存，通过product.setSalesCount(product.getSalesCount() - order.getQuantity())调整销量，最后调用productMapper.updateById(product)更新商品数据。

### 用户订单功能

用户订单功能为前台用户提供了完整的订单操作体验，包括创建、支付、查询等全流程功能。用户通过订单创建页面填写收货信息并提交订单，系统前端将数据通过Request.post('/order')发送至后端，后端在createOrder()方法中首先检查商品存在性，再验证库存充足性，然后计算订单总价，最后调用orderMapper.insert(order)创建订单。订单支付是关键功能，系统支持余额支付和支付宝支付两种方式，用户点击支付按钮时，通过handleAlipay()方法打开支付页面window.open('http://localhost:1234/api/alipay/pay/' + order.id, '\_blank')，并启动轮询检查支付状态startPolling()。后端通过@Transactional注解保证事务性，在payOrder()方法中更新商品库存和销量，最后更新订单状态。

### 订单查询功能

订单查询功能实现了多维度、高效率的订单检索能力，支持按订单ID、用户ID、状态等条件查询订单。前端订单页面通过getOrders()方法处理用户查询请求，将userId、status等条件通过Request.get('/order/page')接口发送至后端。后端getOrdersByPage()方法接收参数并构建查询条件，使用queryWrapper.eq(StringUtils.isNotBlank(userId), Order::getUserId, userId)实现条件查询，通过queryWrapper.in(StringUtils.isNotBlank(status), Order::getStatus, statusList)支持状态筛选。查询结果通过page = orderMapper.selectPage(new Page<>(currentPage, size), queryWrapper)获取分页数据，然后通过for (Order order : page.getRecords())循环填充用户和商品信息，order.setUser(userMapper.selectById(order.getUserId()))关联用户数据，order.setProduct(productMapper.selectById(order.getProductId()))关联商品数据。系统通过这种方式返回完整的订单信息，支持前端展示丰富的订单详情。

### 订单状态管理功能

订单状态管理是订单模块的核心功能，实现了订单全生命周期的状态控制。系统定义了完整的订单状态流转机制，通过updateOrderStatus()方法统一管理状态变更。用户确认收货功能通过handleConfirmReceipt()方法调用Request.put('/order/confirm-receipt/${order.id}')接口，后端接收请求后执行order.setStatus(3)将状态更新为已完成。退款申请通过handleApplyRefund()方法调用Request.put('/order/apply-refund/${order.id}')接口，传递refundReason参数，后端在applyRefund()方法中执行order.setLastStatus(order.getStatus())保存原状态，然后更新为退款中状态order.setStatus(5)和退款申请状态order.setRefundStatus(1)。商户处理退款通过handleRefund()方法，根据处理结果更新状态，同意退款时执行商品库存和销量恢复。整个状态管理过程中，系统通过@Transactional注解确保数据一致性，通过严格的状态检查防止非法状态转换，如if (order.getStatus() != 5) return Result.error("-1", "订单当前状态不是退款中")。

## 购物车模块详细设计购物车管理功能

购物车管理功能实现了对系统购物车记录的全面管理，主要面向管理员使用。管理员通过购物车管理页面，调用getList()方法发起GET请求获取分页购物车数据。后端Controller层通过@GetMapping("/page")接口接收请求，调用cartService.getCartByPage()方法处理，该方法使用MyBatis-Plus的LambdaQueryWrapper构建多条件查询。当提供userId参数时，通过queryWrapper.eq(Cart::getUserId, userId)筛选特定用户的购物车；当提供productName参数时，系统首先查询符合条件的产品ID列表，然后通过queryWrapper.in(Cart::getProductId, productIds)筛选包含这些产品的购物车记录。查询结果通过cartMapper.selectPage(page, queryWrapper)获取，然后系统遍历结果集，通过cart.setUser(userMapper.selectById(cart.getUserId()))和cart.setProduct(productMapper.selectById(cart.getProductId()))填充关联的用户和商品信息。删除功能通过handleDelete()方法调用Request.delete('/cart/${item.id}')实现，支持管理员清理异常或过期的购物车记录。

### 前台购物车功能

用户在商品详情页点击"加入购物车"按钮时，系统将商品信息通过POST方法发送至后端。后端在addToCart()方法中检查商品存在性与验证库存充足性。系统还会检查用户是否已将该商品添加到购物车，通过Cart existingCart = cartMapper.selectOne(queryWrapper)查询现有记录，如果存在则更新购物车数量，否则创建新记录。用户访问购物车页面时，系统通过getCartItems()方法调用Request.get('/cart/user/${userId}')获取购物车列表，前端添加selected属性用于选择商品。用户可以通过handleQuantityChange()方法调用Request.put('/cart/${item.id}?quantity=${value}')更新商品数量。用户点击结算按钮时，系统通过handleCheckout()方法为每个选中商品创建订单，通过Promise.all(orderPromises)并行处理多个订单创建请求，成功后通过handleBatchDelete()清空已结算的购物车项。

### 购物车查询功能

用户查询自己的购物车时，前端通过getCartItems()方法调用Request.get('/cart/user/${userId}')接口，后端在getCartByUserId()方法中通过queryWrapper.eq(Cart::getUserId, userId)筛选特定用户的购物车记录。后端使用List&lt;Cart&gt; carts = cartMapper.selectList(queryWrapper)查询数据，然后通过carts.forEach(cart -> {...})循环填充每条记录的用户和商品信息。管理员进行组合查询时，系统支持多种筛选条件组合，如用户ID和商品名称，通过动态构建查询条件实现灵活查询。当查询商品名称时，系统使用子查询策略，先通过productMapper.selectList()查询符合名称条件的产品列表，然后通过queryWrapper.in(Cart::getProductId, productIds)筛选包含这些产品的购物车记录。

# 系统测试与优化

## 测试环境与策略

### 测试环境配置

系统测试环境采用与生产环境相近的配置，以确保测试结果的可靠性与实用性。测试环境配置如下：

操作系统：Windows11

软件环境：Spring Boot 3、JDK 17、Vue.js 2、Node.js 16

测试工具：JUnit、JMeter、Selenium、OWASP ZAP、Postman

数据库：MySQL 8.0

## 测试策略与方法

系统测试采用多层次、全方位的测试策略，确保系统质量满足需求：

单元测试：使用JUnit 5对关键业务逻辑和组件进行单元测试，确保各模块功能的正确性。

集成测试：检验模块间接口和交互是否正常，使用Spring Test框架模拟HTTP请求测试RESTful API。

功能测试：基于需求文档进行全面的功能验证，确保所有功能点符合预期。

性能测试：使用JMeter工具对系统进行负载测试和压力测试，评估系统在不同负载条件下的性能表现。

安全测试：采用OWASP测试方法论，检测系统安全漏洞和薄弱环节。

兼容性测试：验证系统在不同浏览器（Chrome、Firefox、Edge、Safari）和设备（PC、平板、手机）上的兼容性。

## 功能测试

### 用户与账户管理模块

#### 用户注册功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| UT-001 | 使用有效邮箱和密码注册新用户 | 注册成功，返回成功消息，数据库新增用户记录 | 与预期一致 |
| UT-002 | 使用已存在的用户名注册 | 注册失败，提示"用户名已存在" | 与预期一致 |
| UT-003 | 使用已存在的邮箱注册 | 注册失败，提示"邮箱已被使用" | 与预期一致 |
| UT-004 | 使用格式不正确的邮箱注册 | 注册失败，提示"邮箱格式不正确" | 与预期一致 |
| UT-005 | 密码长度小于8位 | 注册失败，提示"密码长度不能小于8位" | 与预期一致 |
| UT-006 | 邮箱验证码校验 | 验证成功，完成注册 | 偶发验证码超时问题 |
| UT-007 | 管理员邀请码校验 | 验证成功，注册为管理员账号 | 与预期一致 |

#### 用户登录功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| UT-008 | 使用正确用户名和密码登录 | 登录成功，跳转至相应页面 | 与预期一致 |
| UT-009 | 使用不存在的用户名登录 | 登录失败，提示"用户不存在" | 与预期一致 |
| UT-010 | 使用错误密码登录 | 登录失败，提示"密码错误" | 与预期一致 |
| UT-011 | 使用被禁用的账号登录 | 登录失败，提示"账号已被禁用" | 与预期一致 |
| UT-012 | 验证码校验 | 验证码正确时登录成功，错误时提示重新输入 | 与预期一致 |
| UT-013 | 记住密码功能 | 下次访问自动填充用户名和密码 | 与预期一致 |

#### 密码找回功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| UT-014 | 使用注册邮箱找回密码 | 发送验证码至邮箱 | 与预期一致 |
| UT-015 | 使用未注册邮箱找回密码 | 提示"该邮箱未注册" | 与预期一致 |
| UT-016 | 验证码正确，重置密码 | 密码重置成功，可使用新密码登录 | 部分用户需要多次登录才能使用新密码 |
| UT-017 | 验证码错误，重置密码 | 重置失败，提示"验证码错误" | 与预期一致 |

#### 用户管理功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| UT-018 | 管理员查看用户列表 | 显示所有用户信息和分页控件 | 与预期一致 |
| UT-019 | 按用户名搜索用户 | 显示符合搜索条件的用户 | 与预期一致 |
| UT-020 | 管理员新增用户 | 创建成功，列表中显示新用户 | 与预期一致 |
| UT-021 | 管理员编辑用户信息 | 信息更新成功 | 与预期一致 |
| UT-022 | 管理员禁用用户账号 | 账号状态变更为禁用 | 与预期一致 |
| UT-023 | 管理员批量删除用户 | 选中用户被删除 | 操作耗时长，影响用户体验 |

### 产品与交易模块

#### 产品管理功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| PT-001 | 添加新产品（含图片上传） | 产品创建成功，图片上传成功 | 批量上传图片偶发失败 |
| PT-002 | 编辑产品信息 | 产品信息更新成功 | 与预期一致 |
| PT-003 | 产品上架/下架操作 | 状态切换成功，前台显示/隐藏产品 | 与预期一致 |
| PT-004 | 删除产品 | 产品删除成功，关联数据处理正确 | 与预期一致 |
| PT-005 | 批量导入产品 | 批量创建成功，显示导入结果 | 与预期一致 |
| PT-006 | 按分类筛选产品 | 显示符合分类条件的产品 | 与预期一致 |
| PT-007 | 设置产品折扣价 | 折扣价设置成功，前台显示折扣 | 与预期一致 |

2.2.2 产品搜索功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| PT-008 | 按关键词搜索产品 | 显示包含关键词的产品 | 与预期一致 |
| PT-009 | 组合条件搜索（分类+价格区间） | 显示符合所有条件的产品 | 搜索速度较慢 |
| PT-010 | 搜索结果排序（价格升序） | 按价格从低到高排序 | 与预期一致 |
| PT-011 | 搜索结果排序（销量降序） | 按销量从高到低排序 | 与预期一致 |
| PT-012 | 无结果搜索 | 显示"未找到相关产品"提示 | 与预期一致 |

#### 购物车功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| PT-013 | 添加商品到购物车 | 商品成功添加到购物车 | 与预期一致 |
| PT-014 | 修改购物车商品数量 | 数量更新成功，小计金额同步更新 | 高并发下偶发数据不一致 |
| PT-015 | 删除购物车商品 | 商品从购物车中移除 | 与预期一致 |
| PT-016 | 购物车商品选择/取消选择 | 选中状态切换成功，总价同步更新 | 与预期一致 |
| PT-017 | 购物车全选/取消全选 | 所有商品选中状态同步切换 | 与预期一致 |
| PT-018 | 购物车结算 | 生成订单，跳转支付页面 | 与预期一致 |
| PT-019 | 库存不足时加入购物车 | 提示库存不足，限制可添加数量 | 与预期一致 |

#### 支付功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| PT-020 | 订单余额支付 | 支付成功，订单状态更新为已支付 | 与预期一致 |
| PT-021 | 订单支付宝支付 | 跳转支付宝页面，支付成功后订单状态更新 | 支付结果通知偶有延迟 |
| PT-022 | 支付金额验证 | 实际支付金额与订单金额一致 | 与预期一致 |
| PT-023 | 支付超时处理 | 超时后订单状态更新为支付失败 | 与预期一致 |
| PT-024 | 支付结果查询 | 显示准确的支付状态 | 状态更新有延迟 |

### 订单与物流模块

#### 订单创建功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| OT-001 | 从购物车创建订单 | 订单创建成功，包含所选商品信息 | 与预期一致 |
| OT-002 | 直接购买创建订单 | 订单创建成功，包含指定商品信息 | 与预期一致 |
| OT-003 | 选择收货地址 | 订单包含正确的收货信息 | 与预期一致 |
| OT-004 | 添加订单备注 | 备注信息保存成功 | 与预期一致 |
| OT-005 | 库存检查 | 库存充足时创建成功，库存不足时提示 | 高并发下偶发库存超卖 |
| OT-006 | 计算订单金额 | 订单金额计算准确，包含商品价格和数量 | 与预期一致 |

#### 订单管理功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| OT-007 | 查看订单列表 | 显示用户所有订单及状态 | 与预期一致 |
| OT-008 | 查看订单详情 | 显示订单完整信息，包括商品、金额、状态等 | 与预期一致 |
| OT-009 | 取消未支付订单 | 订单状态更新为已取消，释放库存 | 与预期一致 |
| OT-010 | 确认收货 | 订单状态更新为已完成 | 与预期一致 |
| OT-011 | 订单筛选（按状态） | 显示指定状态的订单 | 与预期一致 |
| OT-012 | 删除已完成订单 | 订单从列表中移除 | 与预期一致 |

#### 订单状态流转测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| OT-013 | 待支付→已支付状态变更 | 支付成功后状态正确更新 | 与预期一致 |
| OT-014 | 已支付→已发货状态变更 | 商家发货后状态正确更新 | 与预期一致 |
| OT-015 | 已发货→已完成状态变更 | 确认收货后状态正确更新 | 与预期一致 |
| OT-016 | 申请退款流程 | 状态变更为退款中，商家收到退款申请 | 与预期一致 |
| OT-017 | 退款审核通过流程 | 状态变更为已退款，资金返还 | 退款状态变更偶有异常 |
| OT-018 | 退款审核拒绝流程 | 状态变更为退款失败，订单恢复原状态 | 与预期一致 |

### 物流管理功能测试

|     |     |     |     |
| --- | --- | --- | --- |
| 编号  | 测试内容 | 预期结果 | 实际结果 |
| OT-019 | 商家填写物流信息 | 物流信息保存成功，订单状态更新为已发货 | 与预期一致 |
| OT-020 | 用户查看物流追踪 | 显示准确的物流状态和流转记录 | 物流更新不及时 |
| OT-021 | 物流信息修改 | 物流信息更新成功 | 与预期一致 |
| OT-022 | 物流状态自动更新 | 系统自动获取并更新最新物流状态 | 更新频率不足 |
| OT-023 | 物流异常处理 | 显示异常状态，提供处理选项 | 与预期一致 |

## 测试结果分析

经过对系统所有功能模块的全面测试，共计执行了60余个测试用例，涵盖了用户与账户管理、产品与交易以及订单与物流三大核心模块的主要功能点。

### 测试覆盖情况

测试覆盖了系统中的所有关键功能，包括用户注册与登录、密码找回、用户管理、产品管理、产品搜索、购物车操作、支付流程、订单处理及物流管理等核心业务流程。测试用例设计全面，从正常操作路径到各种异常情况均有覆盖，确保系统在各种条件下都能稳定运行<sup>\[17\]</sup>。

### 主要发现问题

功能测试过程中发现的主要问题集中在以下几个方面：

数据一致性问题：高并发场景下存在数据不一致情况，主要体现在购物车数量更新和订单创建环节。

超时处理问题：部分异步操作如邮箱验证码发送、支付结果通知等存在超时现象，影响用户体验。

性能相关问题：复杂条件搜索和批量操作的响应速度较慢，特别是在数据量大的情况下更为明显。

信息更新问题：物流信息更新不够及时，影响用户对订单状态的实时了解。

### 改进措施与效果

针对发现的问题，实施了一系列改进措施：

实现了乐观锁机制和库存锁定策略，有效解决了高并发下的数据一致性问题。

优化了异步任务处理机制，增加了重试功能和状态查询能力，减少了超时问题的影响。

针对搜索性能问题，优化了数据库索引设计并实现了结果缓存，显著提升了响应速度。

完善了状态流转逻辑和异常处理机制，确保业务流程的连贯性和可靠性。

优化了物流信息同步机制，增加了定时更新功能，提高了物流信息的实时性。

经过改进，系统功能测试的整体通过率大大上升，关键业务流程的稳定性大幅提高。

### 总体评价

从功能完整性、稳定性和用户体验角度评估，系统总体表现良好，能够满足农产品电商平台的业务需求。测试结果表明，系统已具备上线运行的条件，可为用户提供可靠的农产品电商服务。

# 总结

本文以农产品销售平台为研究对象，针对传统农产品销售中存在的信息不对称、销售渠道有限、供需匹配效率低等问题，设计并实现了一套完整的农产品电子商务系统。通过对系统的需求分析、架构设计、功能实现与测试优化，本研究取得了以下主要成果：

## 研究成果

### 系统架构创新

采用前后端分离架构，前端基于Vue.js和Element UI构建响应式界面，后端使用Spring Boot框架提供RESTful API接口，实现了系统的高可扩展性和维护性。MySQL数据库和Redis缓存的合理应用，为系统提供了可靠的数据存储和高效的数据访问机制。

### 功能模块完善

系统成功实现了用户与权限管理、产品与分类管理、订单与物流管理、系统支持与数据分析四大核心功能模块，覆盖了农产品从上架到售后的完整业务流程。特别是产品推荐模块采用基于协同过滤的算法，有效提升了用户购物体验。

### 用户体验优化

系统前端采用响应式设计，适配不同终端设备；实现了轮播图、动态菜单等视觉元素，提升了用户界面的直观性和吸引力；加入了智能搜索、商品分类等功能，简化了用户的浏览和购买路径。

## 创新点

### 基于协同过滤的产品推荐机制

系统通过分析用户浏览、收藏、购买行为，计算用户相似度，实现个性化产品推荐，有效提高了农产品的曝光率和成交量。

### 动态菜单与权限管理

实现了基于角色的菜单动态生成和权限控制，提升了系统的灵活性和安全性，使不同角色用户获得针对性的功能体验。

## 未来展望

尽管本系统已实现了农产品销售的核心功能，但仍有多方面可以进一步完善和拓展：

农产品溯源系统集成：未来可考虑集成区块链技术，构建农产品质量溯源系统，提高产品透明度和可信度，满足消费者对食品安全的关注需求。

智能物流配送优化：可引入智能算法优化物流配送路径，提高配送效率，降低物流成本，特别是针对农产品保鲜要求高的特点，开发专门的冷链物流解决方案<sup>\[18\]</sup>。

跨平台应用拓展：在现有Web平台基础上，开发移动端应用，实现全渠道销售，满足用户多场景购物需求。

大数据分析能力增强：加强大数据分析和机器学习技术应用，提升用户行为分析、销售预测和库存优化能力，为平台运营和农户决策提供更精准的数据支持。

社区互动功能开发：增加农产品相关的社区互动功能，促进用户分享和交流，增强用户粘性和平台活跃度。

# 参考文献

1.  张菁,石天恩,李秋,等.基于大数据分析的农产品销售预测系统设计与实现\[J\].辽宁师范大学学报(自然科学版),2024,47(01):50-58.
2.  刘文婧.互联网+农产品流通运作模式的创新探究\[J\].商展经济,2024,(24):36-39.
3.  陈燕.基于MVC架构的农产品在线销售管理系统设计与开发\[J\].信息与电脑(理论版), 2020,32(12):110-112.
4.  龙中华.Spring Boot实战派\[M\].北京:电子工业出版,2020.
5.  霍春阳.Vue.js设计与实现\[M\].北京:人民邮电出版社,2022.
6.  翟振兴,张恒岩,崔春华,黄荣,董骐铭.深入浅出MySQL 第3版:数据库开发、优化与管理维护\[M\].北京:人民邮电出版社,2019.
7.  Alan Beaulieu. SQL学习指南（第3版）\[M\].杨云,译. O'Reilly动物系列（中译本）. 北京:人民邮电出版社,异步图书,2022.
8.  陈小燕,朱映辉,余晓春.基于SpringBoot+Vue的好农物商城的设计与实现\[J\].电脑知识与技术,2022,18(22):37-39.
9.  何浩辰,李姗姗,贾周阳,等.基础软件性能缺陷检测研究综述\[J\].计算机学报,2025,48(01):210-233.
10. 苏兵.基于Spring Security的权限管理系统的设计与实现\[J\].电脑与电信,2023,(09): 24-31.
11. 张仁斌，谢昭，吴克伟. 软件安全理论与实践\[M\]. 电子工业出版社，2024：1-356.
12. \[美\] Robert C. Martin（罗伯特 C. 马丁）. 架构整洁之道\[M\]. 孙宇聪，译. 博文视点，电子工业出版社，2018：1-348.
13. 克雷格·沃斯（Craig Walls）. Spring Boot实战\[M\]. 人民邮电出版社，2020：1-209.
14. 宋鹏. Vue.js快跑：构建触手可及的高性能Web应用\[M\]. 电子工业出版社，2018:1-196.
15. 王雨竹，高飞. MySQL入门经典\[M\]. 机械工业出版社，2013：1-424.
16. 王勇,吕明久,陈莉,等.基于RBAC模型的权限管理系统的设计与实现\[J\].江苏工程职业技术学院学报,2024,24(03):15-20.DOI:10.19315/j.issn.2096-0425.2024.03.004.
17. \[美\] 克里斯平（Lisa Crispin）. 敏捷软件测试：测试人员与敏捷团队的实践指南\[M\]. 清华大学出版社，2010:1-350.
18. 林雄.乡村振兴背景下福建省农村电商的发展现状、问题及策略研究\[J\].数字农业与智能农机,2024,(12):102-105.